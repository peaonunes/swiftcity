<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Swicity - Visualizing Swift Systems as cities!</title>
		<script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="js/three.js"></script>
        <script src="js/OrbitControls.js"></script>
        <script src="js/KeyboardControls.js"></script>
        <script src="js/WindowResize.js"></script>
	</head>
	<body>

        <script>

            var controls;
            //Global parameters
            var height = window.innerHeight ;
            var width = window.innerWidth ;
            var scene;
            var camera;
            var renderer;
            var cube;

            var dataset = [
                { key: "Class", coordinates:[1.0,1.0,1.0]},
                { key: "Functions", coordinates:[1,2,1]}
            ];

            function init(){

                setUp();

                renderData();

                camera.position.z = 5;
                camera.position.y = 5;
                camera.position.x = 1;

                scene.background = new THREE.Color(0xffffdd);

                var orbit = new THREE.OrbitControls( camera, renderer.domElement );

                var geometry = new THREE.PlaneGeometry( 10, 10, 5 );
                var material = new THREE.MeshBasicMaterial( {color: 0xd3d3d3, side: THREE.DoubleSide} );
                var plane = new THREE.Mesh( geometry, material );
                plane.rotation.x = Math.PI/2;

                scene.add( plane );

                render(renderer);

                winResize(camera,renderer);

            }

            function setUp(){
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(150, window.innerWidth / window.innerHeight, 1, 1000);

                renderer = new THREE.WebGLRenderer();
                renderer.setSize( width, height);
                document.body.appendChild( renderer.domElement );
            }

            function render() {
                requestAnimationFrame(render);
                renderer.render(scene, camera);
            }

            function renderData(){

                for(var el in dataset){
                    var element = dataset[el];
                    var value = element.coordinates;
                    var geometry = new THREE.BoxGeometry( value[0], value[1], value[2]);
                    var material = new THREE.MeshBasicMaterial( { color: pickColor(element.key) } );
                    var newCube = new THREE.Mesh( geometry, material );

                    newCube.position.x = 1 * el;
                    newCube.position.y = value[1]/2;

                    scene.add(newCube);
                }

            }

            function pickColor(key) {
                if (key == "Class")
                    return "red";
                else (key == "Functions")
                    return "blue";
            }

            init();

        </script>

    </body>
</html>
