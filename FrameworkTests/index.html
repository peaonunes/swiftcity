<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Swicity - Visualizing Swift Systems as cities!</title>
		<script src="https://d3js.org/d3.v4.min.js"></script>
        <script type='text/javascript' src='http://www.x3dom.org/download/x3dom.js'> </script>
        <script type='text/javascript' src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
        <!--<link rel='stylesheet' type='text/css' href='http://www.x3dom.org/download/x3dom.css'></link>-->
        <style>
        x3d
          {
              border:2px solid darkorange;
              background: rgba(128, 128, 128, 0.4);
          }


        body
        {
        font-size:110%;
        font-family:verdana, sans-serif;
        margin: 3em;
        color: lightgray;
        }

        h1
        {
        color: darkorange;
        }
        </style>
	</head>
	<body>
        <!--<script type="text/javascript" src="js/three.js"></script>
        <script type="text/javascript" src="swicityRender.js"></script>-->
        <!--<script type="text/javascript" src="myX3dom.js"></script>-->
        <h1>Usando X3DOM!</h1>
        <p>
            Testando se consigo clicar em algo.
        </p>


        <script>

            function init(){
                x3d = d3.select("body")
                    .append("x3d")
                    .attr("height", "400px")
                    .attr("width", "600px");

                var scene = x3d.append("scene");

                scene.append("viewpoint")
                    .attr( "centerOfRotation", "0 0 5")
                    .attr( "position", "13.742265188709691 -27.453522975182366 10.816062840792625" )
                    .attr( "orientation", "0.962043810961999 0.1696342804961945 0.21376603254551874 1.379433089729343" )
                    ;

                var dataset = [
                    { key: "Class", coordinates:[1.0,1.0,1.0]},
                    { key: "Protocol", coordinates:[1.0,1.0,2.0]},
                    { key: "Functions", coordinates:[1.0,1.0,3.0]}
                ];

                shapes = scene.selectAll("transform.blocks").data(dataset);

                var x = d3.scaleLinear()
                    .domain([0, dataset.length])
                    .range([0, 6]);

                shapesEnter = shapes
                    .enter()
                    .append("transform")
                    .attr("class", "blocks")
                    .attr("translation", function(d,i) { return x(i) + " 0.0 " + d.coordinates[2]/2.0; } )
                    .attr("scale", function(d) { return "1.0 1.0 "+d.coordinates[2]; } )
                    .append("shape");

                shapesEnter
                    .append("appearance")
                    .append("material")
                    .attr("diffuseColor", function(d){
                        console.log(d);
                        return colorN(d.key);
                    } );

                shapesEnter.append( "box" )
                    //.attr("onclick", "alert('boramim')")
                    .attr("size", function(d,i){
                        return "1.0 1.0 1.0";
                    });

                d3.select("box").attr("onclick", "alert('boramim')");

                block = scene.append("transform")
                    .attr("class", "district")
                    .attr("translation", function() { return "0.0 -1.0 0.0"; }
                    .attr("scale", function() { "1.0 1.0 1.0"})
                    .append("shape")
                    .append("app")
            }
            function colorN(type) {
                if (type == "Class")
                    return "red";
                else if (type == "Protocol")
                    return "pink";
                else if (type == "Functions")
                    return "green";
            }

            init();

            function showAlertWithEventCoordinate(event) {
                console.log('hey');
                console.log(event);
                //var pagePt = invertMousePosition(event);
                /*alert(d3.select(event.target).attr('id') + ' picked at:\n'
                + 'world coordinate (' + event.hitPnt + '),\n'
                + 'canvas coordinate (' + event.layerX + ', ' + event.layerY + '),\n'
                + 'page coordinate (' + pagePt.x + ', ' + pagePt.y + ')' )*/
            }

            function doSomething(evt){
                console.log(evt);
            }
        </script>

    </body>
</html>
